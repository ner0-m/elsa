ARG BASE_IMAGE 
FROM elsa/${BASE_IMAGE} as base
MAINTAINER Tobias Lasser <lasser@in.tum.de>
MAINTAINER David Frank <frankd@in.tum.de>

LABEL Description="Image only containing clang-tidy" 
 
ARG CLANG_TIDY_VERSION=9
RUN set -eux && apt update && apt upgrade -qqy && apt install clang-tidy-${CLANG_TIDY_VERSION} -qqy \
  && rm -rf /var/lib/apt/lists/* 
 
# Append llvm directory to path, that we can use clang-tidyinstead of clang-tidy-<some-version> 
ENV PATH="$PATH:/usr/lib/llvm-${CLANG_TIDY_VERSION}/bin/"
  
# Add Test script 
ADD tests/test_clang-tidy.sh /tmp/tests/test_clang-tidy.sh
 
CMD bash 
